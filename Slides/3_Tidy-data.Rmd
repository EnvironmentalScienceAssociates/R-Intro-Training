---
title: "Tidy Data"
author: 
  - "Travis Hinkelman"
date: "2020-12-18"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: xaringan-themer.css
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(tidyverse)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_duo_accent(
  primary_color = "#699CC6",
  secondary_color = "#F9A134",
  inverse_header_color = "#FFFFFF",
  extra_css = list(".title-slide" = list("background-color" = "#FFFFFF"),
                   ".title-slide, .title-slide h1, .title-slide h2, .title-slide h3" = 
                     list("color" = "#699CC6")))
```

## Tidy Data

1. Each variable must have its own column.
2. Each observation must have its own row.
3. Each value must have its own cell.

<img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png">

.footnote[[Source](https://r4ds.had.co.nz/tidy-data.html)]

---

## Texas Housing Dataset

```{r echo = TRUE}
head(txhousing, 10)
```

---

## Pivot

```{r echo = TRUE}
txhousing %>% 
  filter(city %in% c("Austin", "Dallas", "Houston", "Lubbock") &
           year %in% 2006:2010) %>% 
  group_by(year, city) %>% 
  summarise(avg_median = mean(median, na.rm = TRUE)) %>% 
  pivot_wider(names_from = city, values_from = avg_median)
```


---

## Pivot

```{r echo = TRUE}
txhousing %>% 
  filter(city %in% c("Austin", "Dallas", "Houston", "Lubbock") &
           year %in% 2006:2010) %>% 
  group_by(year, city) %>% 
  summarise(avg_median = mean(median, na.rm = TRUE)) %>% 
  pivot_wider(names_from = year, values_from = avg_median)
```
